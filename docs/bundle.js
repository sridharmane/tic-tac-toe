!function(t){function e(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return Array.isArray(t)?t:Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(2);var i=n(1);window.addEventListener("load",function(t){var e=new c;document.getElementById("action-button").addEventListener("click",function(){e.reset()})});var u=function(){function t(e){var n=this;s(this,t),this.onClick=function(t){n.status===i.CELL_STATES.BLANK&&(n.status=n.currentPlayer)},this.elementRef=e,this.status=i.CELL_STATES.BLANK,this.elementRef.addEventListener("click",function(t){n.onClick(t)})}return a(t,[{key:"currentPlayer",get:function(){return this._currentPlayer||null},set:function(t){this._currentPlayer=t}},{key:"status",get:function(){return this._status||null},set:function(t){this._status=t,this.elementRef.innerHTML='<span class="cell-text">'+t+"</span>",t!==i.CELL_STATES.BLANK&&(this.statusChangedEvent=new Event("cellStatusChanged"),this.elementRef.dispatchEvent(this.statusChangedEvent))}}]),a(t,[{key:"reset",value:function(){this.status=i.CELL_STATES.BLANK}}]),t}(),c=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;s(this,t),this.setup=function(){var t=document.getElementsByClassName("cell"),n=r(t),s=n.slice(0);s.forEach(function(t){var n=new u(t);n.elementRef.addEventListener("cellStatusChanged",function(t){e.onCellStatusChanged(t)}),e.cells.push(n)})},this.onCellStatusChanged=function(){console.log("Cell Status Changed"),e.totalMovesLeft--,e.totalMovesLeft>0?(e.togglePlayer(),e.setGameState(i.GAME_STATES.IN_PROGRESS)):e.setGameState(i.GAME_STATES.FINISHED)},this.gridSize=n,this.cells=[],this.setup(),this.reset()}return a(t,[{key:"togglePlayer",value:function(){this.currentPlayer===i.PLAYERS.X?this.currentPlayer=i.PLAYERS.O:this.currentPlayer=i.PLAYERS.X,this.setCurrentPlayer(this.currentPlayer)}},{key:"setCurrentPlayer",value:function(t){this.playerChangedEvent=new Event("playerChanged"),document.dispatchEvent(this.playerChangedEvent),this.cells.filter(function(t){return t.status===i.CELL_STATES.BLANK}).forEach(function(e){e.currentPlayer=t})}},{key:"reset",value:function(){var t=this;this.currentPlayer=i.PLAYERS.X,this.cells.forEach(function(e){e.currentPlayer=t.currentPlayer,e.reset()}),this.totalMovesLeft=this.gridSize*this.gridSize,this.setGameState(i.GAME_STATES.NEW)}},{key:"setGameState",value:function(t){var e=document.getElementById("action-button"),n=document.getElementById("message");switch(t){case i.GAME_STATES.NEW:e.classList.contains("button-warn")&&e.classList.remove("button-warn"),e.classList.add("button-primary"),e.innerHTML="NEW GAME",n.innerHTML=this.currentPlayer+i.MESSAGES.NEXT_TURN;break;case i.GAME_STATES.IN_PROGRESS:e.classList.contains("button-primary")&&e.classList.remove("button-primary"),e.classList.add("button-warn"),e.innerHTML="RESET",n.innerHTML=this.currentPlayer+i.MESSAGES.NEXT_TURN;break;case i.GAME_STATES.FINISHED:e.innerHTML="PLAY AGAIN",e.classList.add("button-primary"),n.innerHTML=i.MESSAGES.GAME_OVER}}}]),t}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CELL_STATES={BLANK:" ",X:"X",O:"O"},e.GAME_STATES={NEW:"NEW",IN_PROGRESS:"IN_PROGRESS",FINISHED:"FINISHED"},e.CELL_STATES_TO_NUMBERS={" ":-3,X:1,O:2},e.PLAYERS={X:"X",O:"O"},e.MESSAGES={NEXT_TURN:"&apos;s Turn",GAME_OVER:"GAME OVER"}},function(t,e){}]);